{"ast":null,"code":"var _jsxFileName = \"/Users/noah.menikefs/Desktop/menisked/MeniSked/src/Components/Schedules/PubSchedule.js\";\nimport React from 'react';\nimport Calendar from './Calendar/Calendar';\nimport Button from 'react-bootstrap/button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport MyDocument from './../PDF/MyDocument';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport { PDFDownloadLink } from '@react-pdf/renderer';\nimport moment from 'moment';\nimport './Schedules.css';\nconst style = {\n  position: \"relative\",\n  margin: \"10px auto\",\n  width: \"90%\"\n};\n\nclass PubSchedule extends React.Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      this.loadAllNotes();\n      this.loadrHolidays();\n      this.loadnrHolidays();\n      this.loadEntries();\n      this.loadCallTypes();\n      this.loadSked();\n      this.loadPublished();\n    };\n\n    this.loadPublished = () => {\n      fetch('http://localhost:3000/published').then(response => response.json()).then(num => this.setState({\n        published: num\n      }));\n    };\n\n    this.publishSked = () => {\n      var a = moment([2020, 5, 1]);\n      var b = this.state.dateContext;\n      const num = b.diff(a, 'months');\n      fetch('http://localhost:3000/published', {\n        method: 'put',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          newNum: num\n        })\n      }).then(response => response.json()).then(num => this.setState({\n        published: num\n      }));\n    };\n\n    this.loadSked = () => {\n      fetch('http://localhost:3000/people').then(response => response.json()).then(docs => {\n        let arr = [];\n\n        for (let i = 0; i < docs.length; i++) {\n          for (let j = 0; j < docs[i].worksked.length; j++) {\n            arr.push({\n              id: docs[i].worksked[j].id,\n              date: docs[i].worksked[j].date,\n              name: docs[i].lastname,\n              colour: docs[i].colour,\n              priority: this.priorityCheck(docs[i].worksked[j].id)\n            });\n          }\n        }\n\n        arr.sort(function (a, b) {\n          return a.priority - b.priority;\n        });\n        this.setState({\n          sked: arr\n        });\n      });\n    };\n\n    this.priorityCheck = id => {\n      let index = -1;\n\n      for (let n = 0; n < this.state.callList.length; n++) {\n        if (this.state.callList[n].id === id) {\n          index = n;\n          break;\n        }\n      }\n\n      if (index !== -1) {\n        return this.state.callList[index].priority;\n      } else {\n        return 1000;\n      }\n    };\n\n    this.loadEntries = () => {\n      fetch('http://localhost:3000/sked/entries').then(response => response.json()).then(entries => this.setState({\n        entryList: entries.filter(entry => entry.isactive === true)\n      }));\n    };\n\n    this.loadCallTypes = () => {\n      fetch('http://localhost:3000/callTypes').then(response => response.json()).then(calls => this.setState({\n        callList: calls.sort(function (a, b) {\n          return a.priority - b.priority;\n        })\n      }));\n    };\n\n    this.loadAllNotes = () => {\n      fetch('http://localhost:3000/sked/allNotes').then(response => response.json()).then(notes => this.setState({\n        numNotes: notes.filter(note => note.type === 1),\n        vNotes: notes.filter(note => note.type === 2),\n        iNotes: notes.filter(note => note.type === 3)\n      }));\n    };\n\n    this.loadrHolidays = () => {\n      fetch('http://localhost:3000/holiday/r').then(response => response.json()).then(holidays => this.setState({\n        rHolidayList: holidays.filter(holiday => holiday.isactive === true)\n      }));\n    };\n\n    this.loadnrHolidays = () => {\n      fetch('http://localhost:3000/holiday/nr').then(response => response.json()).then(holidays => this.setState({\n        nrHolidayList: holidays\n      }));\n    };\n\n    this.loadNewDays = dateContext => {\n      let newArr = [];\n      this.state.nrHolidayList.forEach(nholiday => {\n        nholiday.eventsked.forEach(date => {\n          let dateArr = date.split(\"/\");\n\n          if (dateArr[0] === dateContext.format('MM') && dateArr[2] === dateContext.format('YYYY')) {\n            newArr.push({\n              day: parseInt(dateArr[1], 10),\n              name: nholiday.name\n            });\n          }\n        });\n      });\n      this.state.rHolidayList.forEach(holiday => {\n        if (holiday.month === dateContext.format('MMMM')) {\n          newArr.push({\n            day: holiday.day,\n            name: holiday.name\n          });\n        }\n      });\n      this.setState({\n        holiDays: newArr,\n        render: true\n      });\n    };\n\n    this.onDayClick = (e, day) => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).set(\"date\", day);\n      this.setState({\n        dateContext: dateContext,\n        day: day\n      });\n      this.toggleShow(day);\n    };\n\n    this.toggleShow = day => {\n      this.setState({\n        show: !this.state.show\n      });\n    };\n\n    this.months = moment.months();\n\n    this.setMonth = month => {\n      let monthNo = this.months.indexOf(month);\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).set(\"month\", monthNo);\n      this.setState({\n        dateContext: dateContext\n      });\n      this.loadNewDays(dateContext);\n    };\n\n    this.nextMonth = () => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).add(1, \"month\");\n\n      if (!this.props.testisadmin) {\n        let nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n        let nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\n        if (dateContext.year() < nYear) {\n          this.setState({\n            dateContext: dateContext\n          });\n          this.loadNewDays(dateContext);\n          this.props.onNextYear && this.props.onNextYear();\n        } else if (dateContext.year() === nYear) {\n          if (dateContext.month() <= nMonth) {\n            this.setState({\n              dateContext: dateContext\n            });\n            this.loadNewDays(dateContext);\n            this.props.onNextMonth && this.props.onNextMonth();\n          }\n        }\n      } else if (dateContext.year() <= this.props.today.year() + 10) {\n        this.setState({\n          dateContext: dateContext\n        });\n        this.loadNewDays(dateContext);\n        this.props.onNextMonth && this.props.onNextMonth();\n      }\n    };\n\n    this.prevMonth = () => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).subtract(1, \"month\");\n\n      if (dateContext.year() >= 2020) {\n        this.setState({\n          dateContext: dateContext\n        });\n        this.loadNewDays(dateContext);\n        this.props.onPrevMonth && this.props.onPrevMonth();\n      }\n    };\n\n    this.nextYear = () => {\n      if (!this.props.testisadmin) {\n        let nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\n        if (this.state.dateContext.year() + 1 <= nYear) {\n          let dateContext = Object.assign({}, this.state.dateContext);\n          dateContext = moment(dateContext).add(1, \"year\");\n          this.setState({\n            dateContext: dateContext\n          });\n          this.loadNewDays(dateContext);\n          this.props.onNextYear && this.props.onNextYear();\n        }\n      } else if (this.state.dateContext.year() + 1 <= this.props.today.year() + 10) {\n        let dateContext = Object.assign({}, this.state.dateContext);\n        dateContext = moment(dateContext).add(1, \"year\");\n        this.setState({\n          dateContext: dateContext\n        });\n        this.loadNewDays(dateContext);\n        this.props.onNextYear && this.props.onNextYear();\n      }\n    };\n\n    this.prevYear = () => {\n      if (this.state.dateContext.year() - 1 >= 2020) {\n        let dateContext = Object.assign({}, this.state.dateContext);\n        dateContext = moment(dateContext).subtract(1, \"year\");\n        this.setState({\n          dateContext: dateContext\n        });\n        this.loadNewDays(dateContext);\n        this.props.onPrevYear && this.props.onPrevYear();\n      }\n    };\n\n    this.setYear = year => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).set(\"year\", year);\n\n      if (!this.props.testisadmin) {\n        let nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n        let nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\n        if (dateContext.year() === nYear && nMonth < dateContext.month()) {\n          dateContext = moment(dateContext).set(\"month\", nMonth);\n        }\n      }\n\n      this.setState({\n        dateContext: dateContext\n      });\n      this.loadNewDays(dateContext);\n    };\n\n    this.onMonthChange = event => {\n      this.setMonth(event.target.value);\n      this.setState({\n        month: event.target.value\n      });\n    };\n\n    this.onYearChange = event => {\n      this.setYear(event.target.value);\n    };\n\n    this.noteRadioChange = event => {\n      this.setState({\n        radio: event.target.id\n      });\n    };\n\n    this.onNotesSubmit = () => {\n      if (this.state.note.length > 0 && this.state.radio > 0) {\n        fetch('http://localhost:3000/sked/notes', {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            date: this.state.dateContext.format('MM') + '/' + this.state.day + '/' + this.state.dateContext.format('Y'),\n            type: parseInt(this.state.radio, 10),\n            msg: this.state.note\n          })\n        }).then(response => response.json()).then(note => {\n          if (note.id) {\n            this.loadAllNotes();\n          }\n        });\n        this.setState({\n          radio: 0,\n          note: ''\n        });\n        this.toggleShow();\n      }\n    };\n\n    this.onNoteChange = event => {\n      this.setState({\n        note: event.target.value\n      });\n    };\n\n    this.reset = () => {\n      this.setState({\n        dateContext: this.props.today\n      });\n      this.loadNewDays(this.props.today);\n    };\n\n    this.yearSelect = () => {\n      let arr = [];\n      let fYear = this.props.today.year();\n\n      if (this.props.testisadmin) {\n        for (let i = 2020; i <= fYear + 10; i++) {\n          arr.push( /*#__PURE__*/React.createElement(\"option\", {\n            key: i,\n            value: i,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 14\n            }\n          }, i));\n        }\n      } else {\n        let nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\n        for (let i = 2020; i <= nYear; i++) {\n          arr.push( /*#__PURE__*/React.createElement(\"option\", {\n            key: i,\n            value: i,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 14\n            }\n          }, i));\n        }\n      }\n\n      return arr;\n    };\n\n    this.monthSelect = () => {\n      let m = 11;\n      let arr = [];\n\n      if (!this.props.testisadmin) {\n        let nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n        let nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n\n        if (this.state.dateContext.year() === nYear) {\n          m = nMonth;\n        }\n      }\n\n      for (let i = 0; i <= m; i++) {\n        arr.push( /*#__PURE__*/React.createElement(\"option\", {\n          key: i,\n          value: this.months[i],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }\n        }, this.months[i]));\n      }\n\n      return arr;\n    };\n\n    this.publishShow = () => {\n      if (this.props.testisadmin) {\n        let nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n        let nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n        let p = true;\n\n        if (this.state.dateContext.year() === nYear) {\n          if (this.state.dateContext.month() > nMonth) {\n            p = false;\n          }\n        } else if (this.state.dateContext.year() > nYear) {\n          p = false;\n        }\n\n        if (p) {\n          return /*#__PURE__*/React.createElement(Col, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"h5\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 18\n            }\n          }, \"Published\"));\n        }\n\n        return /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 12\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          onClick: this.publishSked,\n          className: \"top-child\",\n          variant: \"primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 17\n          }\n        }, \"Publish\"));\n      } else {\n        return /*#__PURE__*/React.createElement(Col, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 12\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 17\n          }\n        }));\n      }\n    };\n\n    this.adminNotes = () => {\n      if (this.props.testisadmin === true) {\n        return /*#__PURE__*/React.createElement(Form, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 5\n          }\n        }, /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 6\n          }\n        }), /*#__PURE__*/React.createElement(Form.Group, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 12\n          }\n        }, /*#__PURE__*/React.createElement(Form.Control, {\n          onChange: this.onNoteChange,\n          id: \"note-text\",\n          size: \"sm\",\n          type: \"text\",\n          placeholder: \"Add Note\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(Form.Label, {\n          id: \"typeON\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 12\n          }\n        }, \"Type of Note:\"), /*#__PURE__*/React.createElement(Form.Group, {\n          onChange: this.noteRadioChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 12\n          }\n        }, /*#__PURE__*/React.createElement(Form.Check, {\n          name: \"noteType\",\n          inline: true,\n          label: \"Numbers\",\n          type: \"radio\",\n          id: \"1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 12\n          }\n        }), /*#__PURE__*/React.createElement(Form.Check, {\n          inline: true,\n          name: \"noteType\",\n          label: \"Visible\",\n          type: \"radio\",\n          id: \"2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(Form.Check, {\n          inline: true,\n          name: \"noteType\",\n          label: \"Invisible\",\n          type: \"radio\",\n          id: \"3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 11\n          }\n        })), /*#__PURE__*/React.createElement(Form.Group, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 12\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          onClick: this.onNotesSubmit,\n          size: \"sm\",\n          variant: \"primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 11\n          }\n        }, \"Submit Note\")));\n      }\n    };\n\n    this.idToName = id => {\n      for (let n = 0; n < this.state.callList.length; n++) {\n        if (this.state.callList[n].id === id) {\n          return this.state.callList[n].name;\n        }\n      }\n\n      for (let i = 0; i < this.state.entryList.length; i++) {\n        if (this.state.entryList[i].id === id) {\n          return this.state.entryList[i].name;\n        }\n      }\n    };\n\n    this.state = {\n      numNotes: [],\n      vNotes: [],\n      iNotes: [],\n      show: false,\n      dateContext: moment(),\n      note: '',\n      radio: 0,\n      rHolidayList: [],\n      nrHolidayList: [],\n      holiDays: [],\n      render: false,\n      sked: [],\n      entryList: [],\n      callList: [],\n      day: -1,\n      published: -1\n    };\n  }\n\n  render() {\n    const {\n      show,\n      dateContext,\n      numNotes,\n      vNotes,\n      iNotes,\n      nrHolidayList,\n      render,\n      holiDays,\n      sked,\n      entryList,\n      callList,\n      day\n    } = this.state;\n    const {\n      testisadmin,\n      today,\n      user\n    } = this.props;\n    let modalList = [];\n\n    for (let i = 0; i < sked.length; i++) {\n      const splitArr = sked[i].date.split('/');\n\n      if (splitArr[0] === dateContext.format('MM') && parseInt(splitArr[1], 10) === day && splitArr[2] === dateContext.format('YYYY')) {\n        modalList.push( /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 20\n          }\n        }, this.idToName(sked[i].id) + ' ', /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            'backgroundColor': sked[i].colour\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 65\n          }\n        }, sked[i].name)));\n      }\n    }\n\n    let noteList = [];\n\n    for (let i = 0; i < vNotes.length; i++) {\n      const splitArr = vNotes[i].date.split('/');\n\n      if (splitArr[0] === dateContext.format('MM') && parseInt(splitArr[1], 10) === day && splitArr[2] === dateContext.format('YYYY')) {\n        noteList.push( /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          id: \"notes\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 19\n          }\n        }, vNotes[i].msg));\n      }\n    }\n\n    if (testisadmin) {\n      for (let i = 0; i < iNotes.length; i++) {\n        const splitArr = iNotes[i].date.split('/');\n\n        if (splitArr[0] === dateContext.format('MM') && parseInt(splitArr[1], 10) === day && splitArr[2] === dateContext.format('YYYY')) {\n          noteList.push( /*#__PURE__*/React.createElement(\"li\", {\n            key: i,\n            id: \"iNotes\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 20\n            }\n          }, iNotes[i].msg));\n        }\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"screen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"labels\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"labels-child\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 12\n      }\n    }, \"Month\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"labels-child\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 12\n      }\n    }, \"Year\")), this.publishShow(), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.reset,\n      id: \"today\",\n      className: \"top-child\",\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 12\n      }\n    }, \"Today\"))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.dateContext.format('MMMM'),\n      onChange: this.onMonthChange,\n      className: \"top-child month selector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 12\n      }\n    }, this.monthSelect())), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.dateContext.format('Y'),\n      onChange: this.onYearChange,\n      className: \"top-child year selector\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 13\n      }\n    }, this.yearSelect())), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      className: \"subheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.prevMonth,\n      className: \"arrow top-child\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 8\n      }\n    }, \"\\u25C4\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.nextMonth,\n      className: \"arrow top-child\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 8\n      }\n    }, \"\\u25BA\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.prevYear,\n      className: \"arrow top-child\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 8\n      }\n    }, \"\\u25C4\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.nextYear,\n      className: \"arrow top-child\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 8\n      }\n    }, \"\\u25BA\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 8\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      className: \"curr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xl: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 14\n      }\n    }, dateContext.format('MMMM') + ' ' + dateContext.format('Y')))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sked\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 5\n      }\n    }, nrHolidayList.length > 0 && !render ? this.loadNewDays(this.props.today) : false, /*#__PURE__*/React.createElement(Calendar, {\n      testisadmin: testisadmin,\n      numNotes: numNotes,\n      vNotes: vNotes,\n      iNotes: iNotes,\n      callList: callList,\n      entries: entryList,\n      sked: sked,\n      holiDays: holiDays,\n      type: \"Published\",\n      dateContext: dateContext,\n      today: today,\n      style: style,\n      onDayClick: (e, day) => this.onDayClick(e, day),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      id: \"downloadLink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(PDFDownloadLink, {\n      document: /*#__PURE__*/React.createElement(MyDocument, {\n        numNotes: numNotes,\n        vNotes: vNotes,\n        iNotes: iNotes,\n        holiDays: holiDays,\n        callList: callList,\n        entries: entryList,\n        sked: sked,\n        type: \"Published\",\n        dateContext: dateContext,\n        user: user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 56\n        }\n      }),\n      fileName: dateContext.format('MMMM') + dateContext.format('Y') + 'publishedsked.pdf',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 29\n      }\n    }, ({\n      blob,\n      url,\n      loading,\n      error\n    }) => loading ? 'Loading document...' : 'Download as PDF'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      show: show,\n      onHide: this.toggleShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      id: \"modalTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 16\n      }\n    }, dateContext.format('MMMM') + ' ' + day + ' ' + dateContext.format('Y'))), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 14\n      }\n    }, modalList), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 14\n      }\n    }, noteList), this.adminNotes()), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.toggleShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 16\n      }\n    }, \"Close\")))));\n  }\n\n}\n\nexport default PubSchedule;","map":{"version":3,"sources":["/Users/noah.menikefs/Desktop/menisked/MeniSked/src/Components/Schedules/PubSchedule.js"],"names":["React","Calendar","Button","Row","Col","MyDocument","Modal","Form","PDFDownloadLink","moment","style","position","margin","width","PubSchedule","Component","constructor","componentDidMount","loadAllNotes","loadrHolidays","loadnrHolidays","loadEntries","loadCallTypes","loadSked","loadPublished","fetch","then","response","json","num","setState","published","publishSked","a","b","state","dateContext","diff","method","headers","body","JSON","stringify","newNum","docs","arr","i","length","j","worksked","push","id","date","name","lastname","colour","priority","priorityCheck","sort","sked","index","n","callList","entries","entryList","filter","entry","isactive","calls","notes","numNotes","note","type","vNotes","iNotes","holidays","rHolidayList","holiday","nrHolidayList","loadNewDays","newArr","forEach","nholiday","eventsked","dateArr","split","format","day","parseInt","month","holiDays","render","onDayClick","e","Object","assign","set","toggleShow","show","months","setMonth","monthNo","indexOf","nextMonth","add","props","testisadmin","nMonth","nYear","year","onNextYear","onNextMonth","today","prevMonth","subtract","onPrevMonth","nextYear","prevYear","onPrevYear","setYear","onMonthChange","event","target","value","onYearChange","noteRadioChange","radio","onNotesSubmit","msg","onNoteChange","reset","yearSelect","fYear","monthSelect","m","publishShow","p","adminNotes","idToName","user","modalList","splitArr","noteList","blob","url","loading","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Calendar from './Calendar/Calendar';\nimport Button from 'react-bootstrap/button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport MyDocument from './../PDF/MyDocument'\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport { PDFDownloadLink } from '@react-pdf/renderer';\nimport moment from 'moment';\n\nimport './Schedules.css';\n\nconst style = {\n\tposition: \"relative\",\n\tmargin: \"10px auto\",\n\twidth: \"90%\"\n}\n\nclass PubSchedule extends React.Component{\n\tconstructor(){\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tnumNotes: [],\n\t\t\tvNotes: [],\n\t\t\tiNotes: [],\n\t\t\tshow: false,\n\t\t\tdateContext: moment(),\n\t\t\tnote: '',\n\t\t\tradio: 0,\n\t\t\trHolidayList: [],\n\t\t\tnrHolidayList: [],\n\t\t\tholiDays: [],\n\t\t\trender: false,\n\t\t\tsked: [],\n\t\t\tentryList: [],\n\t\t\tcallList: [],\n\t\t\tday: -1,\n\t\t\tpublished: -1\n\t\t}\n\t}\n\n\tcomponentDidMount = () => {\n   \t\tthis.loadAllNotes();\n   \t\tthis.loadrHolidays();\n   \t\tthis.loadnrHolidays();\n   \t\tthis.loadEntries();\n   \t\tthis.loadCallTypes();\n   \t\tthis.loadSked();\n   \t\tthis.loadPublished();\n   \t\t\n  \t}\n\n  \tloadPublished = () => {\n  \t\tfetch('http://localhost:3000/published')\n      \t\t.then(response => response.json())\n      \t\t.then(num => this.setState({published: num}));\n  \t}\n\n  \tpublishSked = () => {\n\t\tvar a = moment([2020, 5, 1]);\n\t\tvar b = this.state.dateContext;\n\t\tconst num = b.diff(a, 'months');\n\t\tfetch('http://localhost:3000/published', {\n\t\t\tmethod: 'put',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tnewNum: num\n\t\t\t})\n\t\t})\n\t\t.then(response => response.json())\n\t\t.then(num => this.setState({published: num}));\n  \t}\n\n  \tloadSked = () => {\n    \tfetch('http://localhost:3000/people')\n      \t\t.then(response => response.json())\n      \t\t.then(docs => {\n      \t\t\tlet arr = [];\n      \t\t\tfor (let i = 0; i < docs.length; i++){\n      \t\t\t\tfor (let j = 0; j < docs[i].worksked.length; j++){\n      \t\t\t\t\tarr.push({\n      \t\t\t\t\t\tid: docs[i].worksked[j].id,\n      \t\t\t\t\t\tdate: docs[i].worksked[j].date,\n      \t\t\t\t\t\tname: docs[i].lastname,\n      \t\t\t\t\t\tcolour: docs[i].colour,\n      \t\t\t\t\t\tpriority: this.priorityCheck(docs[i].worksked[j].id)\n      \t\t\t\t\t})\n      \t\t\t\t}\n      \t\t\t}\n      \t\t\tarr.sort(function(a, b){return a.priority - b.priority})\n      \t\t\tthis.setState({sked: arr})\n      \t\t});\n  \t}\n\n  \tpriorityCheck = (id) => {\n  \t\tlet index = -1;\n\t\tfor (let n = 0; n < this.state.callList.length; n++){\n\t\t\tif (this.state.callList[n].id === id){\n\t\t\t\tindex = n;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (index !== -1){\n\t\t\treturn this.state.callList[index].priority;\n\t\t}\n\t\telse{\n\t\t\treturn 1000;\n\t\t}\t\n  \t}\n\n  \tloadEntries = () => {\n  \t\tfetch('http://localhost:3000/sked/entries')\n      \t\t.then(response => response.json())\n      \t\t.then(entries => this.setState({entryList: entries.filter((entry => entry.isactive === true))}));\n  \t}\n\n  \tloadCallTypes = () => {\n\t\tfetch('http://localhost:3000/callTypes')\n\t\t\t.then(response => response.json())\n\t\t\t.then(calls => this.setState({callList: calls.sort(function(a, b){return a.priority - b.priority})}));\n\t}\n\n  \tloadAllNotes = () => {\n    \tfetch('http://localhost:3000/sked/allNotes')\n      \t\t.then(response => response.json())\n      \t\t.then(notes => this.setState({\n      \t\t\tnumNotes: notes.filter((note => note.type === 1)),\n      \t\t\tvNotes: notes.filter((note => note.type === 2)),\n      \t\t\tiNotes: notes.filter((note => note.type === 3))\n      \t\t}));\n\n  \t}\n\n  \tloadrHolidays = () => {\n\t\tfetch('http://localhost:3000/holiday/r')\n\t\t\t.then(response => response.json())\n\t\t\t.then(holidays => this.setState({rHolidayList: holidays.filter((holiday => holiday.isactive === true))}));\n\t}\n\n\tloadnrHolidays = () => {\n\t\tfetch('http://localhost:3000/holiday/nr')\n\t\t\t.then(response => response.json())\n\t\t\t.then(holidays => this.setState({nrHolidayList: holidays}));\n\t}\n\n\tloadNewDays = (dateContext) => {\n\t\tlet newArr = [];\n\t\tthis.state.nrHolidayList.forEach((nholiday => {\n\t\t\tnholiday.eventsked.forEach((date => {\n\t\t\t\tlet dateArr = date.split(\"/\");\n\t\t\t\tif (dateArr[0] === dateContext.format('MM') && dateArr[2] === dateContext.format('YYYY')){\n\t\t\t\t\tnewArr.push({\n\t\t\t\t\t\tday: parseInt(dateArr[1],10),\n\t\t\t\t\t\tname: nholiday.name\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}))\n\t\t}))\n\n\t\tthis.state.rHolidayList.forEach((holiday => {\n\t\t\tif (holiday.month === dateContext.format('MMMM')){\n\t\t\t\tnewArr.push({\n\t\t\t\t\tday:holiday.day,\n\t\t\t\t\tname: holiday.name\n\t\t\t\t});\n\t\t\t}\n\t\t}))\n\t\tthis.setState({\n\t\t\tholiDays: newArr,\n\t\t\trender: true}\n\t\t);\n\t}\n\n\n\tonDayClick = (e,day) => {\n\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\tdateContext = moment(dateContext).set(\"date\", day);\n\t\tthis.setState({\n\t\t\tdateContext: dateContext,\n\t\t\tday: day\n\t\t});\n\t\tthis.toggleShow(day);\n\t}\n\n\ttoggleShow = (day) => {\n\t\tthis.setState({show: !this.state.show});\n\t}\n\n\tmonths = moment.months(); // List of each month\n\t\n\t\n\tsetMonth = (month) => {\n\t\tlet monthNo = this.months.indexOf(month);\n\t\tlet dateContext = Object.assign({}, this.state.dateContext)\n\t\tdateContext = moment(dateContext).set(\"month\", monthNo);\n\t\tthis.setState({\n\t\t\tdateContext: dateContext,\n\t\t});\n\t\tthis.loadNewDays(dateContext);\n\t}\n\n\tnextMonth = () => {\n\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\tdateContext = moment(dateContext).add(1, \"month\");\n\t\tif (!this.props.testisadmin){\n\t\t\tlet nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n\t\t\tlet nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\t\t\tif (dateContext.year() < nYear){\n\t\t\t\tthis.setState({\n\t\t\t\t\tdateContext: dateContext\n\t\t\t\t});\n\t\t\t\tthis.loadNewDays(dateContext);\n\t\t\t\tthis.props.onNextYear && this.props.onNextYear();\n\t\t\t}\n\t\t\telse if (dateContext.year() === nYear){\n\t\t\t\tif (dateContext.month() <= nMonth){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tdateContext: dateContext,\n\t\t\t\t\t});\n\t\t\t\t\tthis.loadNewDays(dateContext);\n\t\t\t\t\tthis.props.onNextMonth && this.props.onNextMonth();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\telse if (dateContext.year() <= (this.props.today.year() + 10)){\n\t\t\tthis.setState({\n\t\t\t\tdateContext: dateContext,\n\t\t\t});\n\t\t\tthis.loadNewDays(dateContext);\n\t\t\tthis.props.onNextMonth && this.props.onNextMonth();\n\t\t}\n\t}\n\n\tprevMonth = () => {\n\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\tdateContext = moment(dateContext).subtract(1, \"month\");\n\t\tif (dateContext.year() >= 2020){\n\t\t\tthis.setState({\n\t\t\t\tdateContext: dateContext,\n\t\t\t});\n\t\t\tthis.loadNewDays(dateContext);\n\t\t\tthis.props.onPrevMonth && this.props.onPrevMonth();\n\t\t}\n\t}\n\n\tnextYear = () => {\n\t\tif (!this.props.testisadmin){\n\t\t\tlet nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\t\t\tif ((this.state.dateContext.year() + 1) <= nYear){\n\t\t\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\t\t\tdateContext = moment(dateContext).add(1, \"year\");\n\t\t\t\tthis.setState({\n\t\t\t\t\tdateContext: dateContext\n\t\t\t\t});\n\t\t\t\tthis.loadNewDays(dateContext);\n\t\t\t\tthis.props.onNextYear && this.props.onNextYear();\n\t\t\t}\n\t\t}\n\t\telse if ((this.state.dateContext.year() + 1) <= (this.props.today.year() + 10)){\n\t\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\t\tdateContext = moment(dateContext).add(1, \"year\");\n\t\t\tthis.setState({\n\t\t\t\tdateContext: dateContext\n\t\t\t});\n\t\t\tthis.loadNewDays(dateContext);\n\t\t\tthis.props.onNextYear && this.props.onNextYear();\n\t\t}\n\t}\n\n\tprevYear = () => {\n\t\tif ((this.state.dateContext.year() - 1) >= 2020) {\n\t\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\t\tdateContext = moment(dateContext).subtract(1, \"year\");\n\t\t\tthis.setState({\n\t\t\t\tdateContext: dateContext\n\t\t\t});\n\t\t\tthis.loadNewDays(dateContext);\n\t\t\tthis.props.onPrevYear && this.props.onPrevYear();\n\t\t}\n\t}\n\n\tsetYear = (year) => {\n\t\tlet dateContext = Object.assign({}, this.state.dateContext);\n\t\tdateContext = moment(dateContext).set(\"year\",year);\n\t\tif (!this.props.testisadmin){\n\t\t\tlet nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n\t\t\tlet nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\t\t\tif (dateContext.year() === nYear && nMonth < dateContext.month()){\n\t\t\t\tdateContext = moment(dateContext).set(\"month\",nMonth);\n\t\t\t}\n\t\t}\n\t\tthis.setState({\n\t\t\tdateContext: dateContext\n\t\t})\n\t\tthis.loadNewDays(dateContext);\n\t}\n\n\tonMonthChange = (event) => {\n\t\tthis.setMonth(event.target.value);\n\t\tthis.setState({month: event.target.value});\n\t}\n\n\tonYearChange = (event) => {\n\t\tthis.setYear(event.target.value);\n\t}\n\n\tnoteRadioChange = (event) => {\n\t\tthis.setState({radio: event.target.id});\n\t}\n\n\tonNotesSubmit = () => {\n\t\tif (this.state.note.length > 0 && this.state.radio > 0){\n\t\t\tfetch('http://localhost:3000/sked/notes', {\n\t\t\t\tmethod: 'post',\n\t\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdate: this.state.dateContext.format('MM')+'/'+this.state.day+'/'+this.state.dateContext.format('Y'),\n\t\t\t\t\ttype: parseInt(this.state.radio,10),\n\t\t\t\t\tmsg: this.state.note\n\n\t\t\t\t})\n\t\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(note => {\n\t\t\t\tif (note.id){\n\t\t\t\t\tthis.loadAllNotes();\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tradio:0,\n\t\t\t\tnote:''\n\t\t\t})\n\t\t\tthis.toggleShow();\n\t\t}\n\t\t\n\t}\n\n\tonNoteChange = (event) => {\n\t\tthis.setState({note: event.target.value})\n\t}\n\t\n\treset = () => {\n\t\tthis.setState({dateContext: this.props.today});\n\t\tthis.loadNewDays(this.props.today);\n\t}\n\n\t\n\tyearSelect = () => {\n\t\tlet arr = [];\n\t\tlet fYear = this.props.today.year();\n\t\tif (this.props.testisadmin){\n\t\t\tfor (let i = 2020; i <= fYear + 10; i++){\n\t\t\t\tarr.push(<option key={i} value={i}>{i}</option>);\n\t\t\t}\n\t\t}\n\n\t\telse{\n\t\t\tlet nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\t\t\tfor (let i = 2020; i <= nYear; i++){\n\t\t\t\tarr.push(<option key={i} value={i}>{i}</option>);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn arr;\n\t}\n\n\tmonthSelect = () => {\n\t\tlet m = 11;\n\t\tlet arr = [];\n\t\tif (!this.props.testisadmin){\n\t\t\tlet nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\t\t\tlet nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n\t\t\tif (this.state.dateContext.year() === nYear){\n\t\t\t\tm = nMonth;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i <= m; i++){\n\t\t\tarr.push(<option key={i} value={this.months[i]}>{this.months[i]}</option>);\n\t\t}\n\t\treturn arr;\n\t}\n\n\tpublishShow = () => {\n\t\tif (this.props.testisadmin){\n\t\t\tlet nYear = moment([2020, 5, 1]).add(this.state.published, 'month').year();\n\t\t\tlet nMonth = moment([2020, 5, 1]).add(this.state.published, 'month').month();\n\t\t\tlet p = true\n\t\t\tif (this.state.dateContext.year() === nYear){\n\t\t\t\tif (this.state.dateContext.month() > nMonth){\n\t\t\t\t\tp = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.state.dateContext.year() > nYear){\n\t\t\t\tp = false;\n\t\t\t}\n\t\t\tif (p){\n\t\t\t\treturn (<Col><h5>Published</h5></Col>)\n\t\t\t}\n\t\t\treturn (<Col><Button onClick={this.publishSked} className=\"top-child\" variant=\"primary\">Publish</Button></Col>);\n\t\t}\n\t\telse{\n\t\t\treturn (<Col><p></p></Col>);\n\t\t}\n\t}\n\n\tadminNotes = () => {\n\t\tif (this.props.testisadmin === true){\n\t\t\treturn (\n\t\t\t\t<Form>\n\t\t\t\t\t<hr/>\n        \t\t\t<Form.Group>\n        \t\t\t\t<Form.Control onChange={this.onNoteChange} id=\"note-text\" size=\"sm\" type=\"text\" placeholder=\"Add Note\"/>\n        \t\t\t</Form.Group>\n        \t\t\t<Form.Label id=\"typeON\">Type of Note:</Form.Label>\n        \t\t\t<Form.Group onChange={this.noteRadioChange}>\n      \t\t\t\t\t<Form.Check name=\"noteType\" inline label=\"Numbers\" type=\"radio\" id='1'/>\n     \t\t\t\t\t<Form.Check inline name=\"noteType\" label=\"Visible\" type=\"radio\" id='2'/>\n     \t\t\t\t\t<Form.Check inline name=\"noteType\" label=\"Invisible\" type=\"radio\" id='3'/>\n        \t\t\t</Form.Group>\n       \t\t\t\t<Form.Group>\n     \t\t\t\t\t<Button onClick={this.onNotesSubmit} size=\"sm\" variant=\"primary\">Submit Note</Button>\n   \t\t\t\t\t</Form.Group>\n  \t\t\t\t</Form>\n\t\t\t)\n\t\t}\n\t}\n\n\tidToName = (id) => {\n\t\tfor (let n = 0; n < this.state.callList.length; n++){\n\t\t\t\tif (this.state.callList[n].id === id){\n\t\t\t\t\treturn this.state.callList[n].name;\n\t\t\t\t}\n\t\t\t}\n\t\tfor (let i = 0; i < this.state.entryList.length; i++){\n\t\t\tif (this.state.entryList[i].id === id){\n\t\t\t\treturn this.state.entryList[i].name;\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\tconst {show, dateContext, numNotes, vNotes, iNotes, nrHolidayList, render, holiDays, sked, entryList, callList, day} = this.state;\n\t\tconst {testisadmin, today, user} = this.props;\n\n\t\tlet modalList = [];\n\t\tfor (let i = 0; i < sked.length; i++){\n\t\t\tconst splitArr = sked[i].date.split('/');\n\t\t\tif (splitArr[0] === dateContext.format('MM') && parseInt(splitArr[1],10) === day && splitArr[2] === dateContext.format('YYYY')){\n\t\t\t\tmodalList.push(<li key={i}>{this.idToName(sked[i].id) + ' '}<span style={{'backgroundColor':sked[i].colour}}>{sked[i].name}</span></li>);\n\t\t\t}\n\t\t}\n\n\t\tlet noteList = [];\n\t\tfor (let i = 0; i < vNotes.length; i++){\n\t\t\tconst splitArr = vNotes[i].date.split('/');\n\t\t\tif (splitArr[0] === dateContext.format('MM') && parseInt(splitArr[1],10) === day && splitArr[2] === dateContext.format('YYYY')){\n\t\t\t\tnoteList.push(<li key={i} id=\"notes\">{vNotes[i].msg}</li>);\n\t\t\t}\n\t\t}\n\t\tif (testisadmin){\n\t\t\tfor (let i = 0; i < iNotes.length; i++){\n\t\t\t\tconst splitArr = iNotes[i].date.split('/');\n\t\t\t\tif (splitArr[0] === dateContext.format('MM') && parseInt(splitArr[1],10) === day && splitArr[2] === dateContext.format('YYYY')){\n\t\t\t\t\tnoteList.push(<li key={i} id=\"iNotes\">{iNotes[i].msg}</li>);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\treturn(\n\t\t\t<div className=\"screen\">\n\t\t\t\t<div>\n\t\t\t\t\t<Row className=\"labels\">\n\t\t\t\t\t\t<Col><h5 className=\"labels-child\">Month</h5></Col>\n\t\t\t\t\t\t<Col><h5 className=\"labels-child\">Year</h5></Col>\n\t\t\t\t\t\t{this.publishShow()}\n\t\t\t\t\t\t<Col><Button onClick={this.reset} id=\"today\" className=\"top-child\" variant=\"primary\">Today</Button></Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col><select value={this.state.dateContext.format('MMMM')} onChange={this.onMonthChange} className=\"top-child month selector\">\n\t  \t\t\t\t\t\t{this.monthSelect()}\n\t\t\t\t\t\t</select></Col>\n\t\t\t\t\t\t<Col ><select value={this.state.dateContext.format('Y')} onChange={this.onYearChange} className=\"top-child year selector\">\n\t  \t\t\t\t\t\t{this.yearSelect()}\n\t\t\t\t\t\t</select></Col>\n\t\t\t\t\t\t<Col ><p></p></Col>\n\t\t\t\t\t\t<Col ><p></p></Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row className=\"subheader\">\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Button onClick={this.prevMonth} className=\"arrow top-child\"variant=\"secondary\">&#9668;</Button>\n\t\t\t\t\t\t\t<Button onClick={this.nextMonth} className=\"arrow top-child\"variant=\"secondary\">&#9658;</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Button onClick={this.prevYear} className=\"arrow top-child\"variant=\"secondary\">&#9668;</Button>\n\t\t\t\t\t\t\t<Button onClick={this.nextYear} className=\"arrow top-child\"variant=\"secondary\">&#9658;</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col >\n\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col >\n\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t\t<Row className=\"curr\">\n\t\t\t\t\t<Col xl><h3>{dateContext.format('MMMM')+' '+dateContext.format('Y')}</h3></Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"sked\">\n\t\t\t\t\t{ (nrHolidayList.length > 0 && !render)\n\t\t\t\t\t\t?this.loadNewDays(this.props.today)\n\t\t\t\t\t\t: false\n\t\t\t\t\t}\n\t\t\t\t\t<Calendar testisadmin={testisadmin} numNotes={numNotes} vNotes={vNotes} iNotes={iNotes} callList={callList} entries={entryList} sked={sked} holiDays={holiDays} type=\"Published\" dateContext={dateContext} today={today} style={style} onDayClick={(e,day) => this.onDayClick(e,day)}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t{/*<Col ><Button onClick={this.createPDF} variant=\"primary\">Download as PDF</Button></Col>*/}\n\t\t\t\t\t<Col id='downloadLink'><PDFDownloadLink document={<MyDocument numNotes={numNotes} vNotes={vNotes} iNotes={iNotes} holiDays={holiDays} callList={callList} entries={entryList} sked={sked} type=\"Published\" dateContext={dateContext} user={user} />} fileName={dateContext.format('MMMM')+dateContext.format('Y')+'publishedsked.pdf'}>\n      \t\t\t\t\t{({ blob, url, loading, error }) => (loading ? 'Loading document...' : 'Download as PDF')}\n    \t\t\t\t</PDFDownloadLink></Col>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='modal'>\n\t\t\t\t\t<Modal show={show} onHide={this.toggleShow} >\n        \t\t\t\t<Modal.Header closeButton>\n          \t\t\t\t\t<Modal.Title id='modalTitle'>{dateContext.format('MMMM')+' '+day+' '+dateContext.format('Y')}</Modal.Title>\n       \t \t\t\t\t</Modal.Header>\n        \t\t\t\t<Modal.Body>\n        \t\t\t\t\t<ul>\n        \t\t\t\t\t\t{modalList}\n        \t\t\t\t\t</ul>\n        \t\t\t\t\t<ul>\n        \t\t\t\t\t\t{noteList}\n        \t\t\t\t\t</ul>\n        \t\t\t\t {this.adminNotes()}\n        \t\t\t\t</Modal.Body>\n        \t\t\t\t<Modal.Footer>\n          \t\t\t\t\t<Button variant=\"secondary\" onClick={this.toggleShow}>\n            \t\t\t\t\tClose\n          \t\t\t\t\t</Button>\n\t        \t\t\t</Modal.Footer>\n      \t\t\t\t</Modal>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\n\n\n\t}\n\n\n}\n\nexport default PubSchedule;"]},"metadata":{},"sourceType":"module"}